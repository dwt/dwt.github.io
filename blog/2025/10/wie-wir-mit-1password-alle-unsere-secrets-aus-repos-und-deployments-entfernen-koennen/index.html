
<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="../../../../static/bootstrap-4.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../../static/style.css">
    <link rel="stylesheet" href="../../../../static/pygments.css">
    <title>Wie wir mit 1Password alle unsere Secrets aus Repos und Deployments entfernen kÃ¶nnen</title>
    <link rel="alternate" type="application/atom+xml" title="RSS: Martin HÃ¤ckers Blog Artikel" href="../../../feed.xml" />
  </head>
  <body>
    <header>
      <nav class="navbar navbar-expand-sm">
  <a href="../../../../" class="navbar-brand ">ğŸ </a>
  <input type="checkbox" id="navbar-toggle-checkbox">
  <label for="navbar-toggle-checkbox" class="navbar-brand navbar-toggle d-sm-none float-right" aria-label="Navigation Umschalten">
    <span></span>
  </label>
  <ul class="navbar-nav collapse navbar-collapse">
    
      <li class="nav-item "><a href="../../../../work/" class="nav-link">Professionelle Softwareentwicklung</a></li>
    
      <li class="nav-item "><a href="../../../../projects/" class="nav-link">Projekte</a></li>
    
      <li class="nav-item "><a href="../../../../publications/" class="nav-link">VerÃ¶ffentlichungen und VortrÃ¤ge</a></li>
    
      <li class="nav-item active"><a href="../../../" class="nav-link">Blog<span class="sr-only">(ausgewÃ¤hlt)</span></a></li>
    
      <li class="nav-item "><a href="../../../../categories/" class="nav-link">Kategorien</a></li>
    
    <li class="nav-item ml-auto">
      <a class=nav-link href="./">ğŸ‡©ğŸ‡ª</a>
    </li>
    <li class="nav-item pull-right">
      <a class=nav-link href="../../../../en/blog/2025/10/wie-wir-mit-1password-alle-unsere-secrets-aus-repos-und-deployments-entfernen-koennen/">ğŸ‡¬ğŸ‡§</a>
    </li>
  </ul>
</nav>
<nav class="breadcrumb">
  

  

  

<a class="breadcrumb-item " href="../../../../">ğŸ </a>


<a class="breadcrumb-item " href="../../../">Blog</a>


<a class="breadcrumb-item active" href="./">Wie wir mit 1Password alle unsere Secrets aus Repos und Deployments entfernen kÃ¶nnen</a>

</nav>
    </header>
    <article class="page wie-wir-mit-1password-alle-unsere-secrets-aus-repos-und-deployments-entfernen-koennen  container-fluid">
      
  
  <article class="blog-post">
    <header>
      <h2>
        
        Wie wir mit 1Password alle unsere Secrets aus Repos und Deployments entfernen kÃ¶nnen
        
      </h2>
      <p class="meta">
        written by Martin HÃ¤cker on <time datetime="2025-10-10">Freitag, 10. Oktober 2025</time>
      </p>
    </header>

    <section class="blog-post-body">
      <p><img src="1password-from-chaos-to-order.png" alt="Vom Chaos zur Ordnung mit 1Password"></p>
<h2>Wie wir mit 1Password alle unsere Secrets aus Repos und Deployments entfernen kÃ¶nnen</h2>
<p>In regulierten Umgebungen wie KRITIS gilt: SicherheitsmaÃŸnahmen mÃ¼ssen dem <em>Stand der Technik</em> entsprechen. Dazu gehÃ¶rt auch, dass PasswÃ¶rter und andere Geheimnisse nicht unkontrolliert in Repositories oder Deployments liegen. Wenn ein Mitarbeiter das Team verlÃ¤sst oder ein System kompromittiert wird, mÃ¼ssen alle betroffenen Secrets schnell und nachvollziehbar rotiert werden.</p>
<p>Mit 1Password kÃ¶nnen wir diesen Schritt gehen. Wir verwalten unsere Secrets gemeinsam, versionieren sie und injizieren sie automatisiert in die Systeme, die sie wirklich brauchen.</p>
<h3>Der AuslÃ¶ser: Ein GesprÃ¤ch auf der it-sa</h3>
<p>Auf der it-sa-Messe sprach ich mit einem Solution-Architekten von 1Password. Ich wollte verstehen, warum unsere bisherigen Versuche, Secrets aus Entwicklungsumgebungen zu entfernen und im Deployment wieder zu injizieren, noch so holprig waren. Das GesprÃ¤ch zeigte mir, wie viel mehr in diesem Thema steckt â€“ organisatorisch und technisch.</p>
<h3>Aha-Moment 1: Mit der 1Password CLI aus dem .env-Chaos zur gemeinsamen Quelle der Wahrheit</h3>
<p>Mein erster Aha-Moment: Mit der 1Password CLI (<code>op read</code>, <code>op run</code>) lassen sich Secrets direkt abrufen. FrÃ¼her musste sich jeder Entwickler fÃ¼r jedes Projekt eine <code>.env</code>-Datei besorgen â€“ oft per Chat oder aus einem gemeinsam genutzten Vault. Das fÃ¼hrte zu veralteten Dateien, fehlender Synchronisierung und unnÃ¶tigem Aufwand fÃ¼r neue Teammitglieder.</p>
<p>Mit der CLI Ã¤ndert sich das grundlegend. <code>.env</code>-Dateien kÃ¶nnen jetzt eingecheckt werden, weil sie keine Secrets mehr enthalten, sondern nur <em><a href="https://developer.1password.com/docs/cli/secret-references/">Referenzen</a></em> darauf. Im Repository ist dokumentiert, welche Secrets benÃ¶tigt werden und aus welchem Vault sie stammen â€“ nicht aber deren Werte.</p>
<ul>
<li><code>op read op://vault/item/field</code> ruft gezielt einzelne Werte ab.</li>
<li><code>op run --env-file=.env -- &lt;befehl&gt;</code> lÃ¶st Secret-Referenzen automatisch als Environment-Variablen auf.</li>
</ul>
<p>Das Ergebnis: eine konsistente Basis fÃ¼r Secrets, die nicht mehr per Hand verteilt werden muss. Entwickler mÃ¼ssen nur die CLI einrichten und sich gelegentlich per Fingerabdruck authentisieren. Das ist ein kleiner Preis fÃ¼r saubere und sichere Umgebungen.</p>
<h3>Aha-Moment 2: Rotation und Compliance als entscheidende Faktoren</h3>
<p>In KRITIS-Umgebungen geht es nicht nur um technische Sicherheit, sondern auch um Nachvollziehbarkeit und Compliance. VerschlÃ¼sselte Secrets im Repository (bei uns meist <code>SealedSecrets</code>) wirken zunÃ¤chst praktisch, weil alle Informationen lokal im Projekt liegen. Doch sie erfÃ¼llen zentrale Anforderungen an Kontrolle und Auditierbarkeit nur unzureichend.</p>
<ul>
<li>Alte Commits enthalten weiterhin alte Secrets. Selbst wenn sie nicht mehr genutzt werden, bleiben sie Teil der Historie.</li>
<li>Dritte (z.â€¯B. GitLab oder externe Partner) haben Zugriff auf verschlÃ¼sselte Artefakte, die spÃ¤ter durch Algorithmusâ€‘SchwÃ¤chen oder fehlerhafte SchlÃ¼sselverwaltung entschlÃ¼sselt werden kÃ¶nnten.</li>
<li>Es gibt keine zentrale Rotation oder Rechteverwaltung. Jede Projektgruppe mÃ¼sste selbst festlegen, wann und wie Secrets erneuert werden.</li>
</ul>
<p>Gerade bei KRITIS gilt: Der Nachweis, dass Secrets regelmÃ¤ÃŸig rotiert, Ã¼berprÃ¼ft und entzogen werden, ist Teil der Compliance. 1Password unterstÃ¼tzt das mit klaren Berechtigungen, nachvollziehbaren Aktionen und zentraler Ablage.</p>
<h3>Aha-Moment 3: Projektbasierte Vaults machen Rechteverwaltung erst mÃ¶glich</h3>
<p>Ein weiteres wichtiges Konzept: projektbezogene Vaults mit eigenen Tokens und Rechten. Viele Personen â€“ auch auÃŸerhalb der Teams â€“ hatten bisher Zugriff auf mehrere oder alle Vaults. Dadurch war der effektive Zugriff auf Secrets zu breit gestreut und schwer nachvollziehbar.</p>
<p>Projektbasierte Vaults und projektspezifische ZugÃ¤nge reduzieren den Zugriff erheblich. Nur Teams oder Personen, die Secrets wirklich benÃ¶tigen, haben Zugriff. Geheimnisse lassen sich gezielt rotieren, ohne dass andere Systeme betroffen sind. Zugriffsrechte kÃ¶nnen klar pro Projekt definiert werden.</p>
<h3>Aha-Moment 4: Service-Accounts als sichere BrÃ¼cke zwischen Projekten und Deployments</h3>
<p>FÃ¼r Deployments ergibt sich daraus ein weiterer Aha-Moment. Service-Accounts, die nur Zugriff auf den Vault des jeweiligen Projekts haben, sind vÃ¶llig ausreichend, um ein Deployment durchzufÃ¼hren. Diese Accounts kÃ¶nnen im Projekt referenziert werden, wÃ¤hrend ihre Zugangsdaten in einem separaten Vault liegen, der nur fÃ¼r Deployment-Prozesse zugÃ¤nglich ist.</p>
<p>So entfÃ¤llt die Notwendigkeit, dass Entwickler direkte ZugÃ¤nge zu produktiven Secrets haben. Der Schutz der Produktionsumgebung wird zu einem festen Bestandteil der Infrastruktur und ist keine Frage von Disziplin oder Vertrauen mehr.</p>
<blockquote><p><strong>ğŸ” Exkurs: Warum nicht einfach SealedSecrets oder SOPS?</strong></p>
<p>In unserer Umgebung nutzen wir derzeit noch <strong><a href="https://github.com/bitnami-labs/sealed-secrets">SealedSecrets</a></strong>, um Secrets verschlÃ¼sselt im Git-Repository zu speichern. Das funktioniert, lÃ¶st aber die strukturellen Probleme nicht: Secrets bleiben an den Code gekoppelt, Rotation ist umstÃ¤ndlich, und alte Commits behalten alte Secrets.</p>
<p><strong><a href="https://github.com/getsops/sops">SOPS</a></strong> ist flexibler, weil es verschiedene Key-Provider (z.â€¯B. AWS KMS oder GCP KMS) unterstÃ¼tzt und sich gut in GitOps-Workflows integrieren lÃ¤sst. Trotzdem bleibt das Grundproblem: Secrets liegen weiterhin im Repository. Wer Zugriff auf den Code hat, hat indirekt auch Zugriff auf verschlÃ¼sselte Geheimnisse.</p>
<p><strong>1Password</strong> geht hier einen Schritt weiter: Secrets verlassen nie das System. Sie werden zentral koordiniert, revisionssicher auditiert und Ã¼ber CLI oder Service-Accounts nur temporÃ¤r injiziert. Der Unterschied liegt nicht in der VerschlÃ¼sselung selbst, sondern in der <em>Verantwortungszuordnung</em> und der MÃ¶glichkeit, Zugriff und Rotation einheitlich zu steuern. FÃ¼r uns ist das die praktikabelste LÃ¶sung.</p>
</blockquote>
<h3>Fazit: Einheitliche Steuerung als SchlÃ¼ssel zur Sicherheit â€“ und bitte um Feedback</h3>
<p>Kurz gesagt: Lokale, im Repository oder CI-System verschlÃ¼sselte Secrets sind bequem, aber langfristig riskant. Eine einheitlich verwaltete LÃ¶sung mit 1Password lÃ¶st diese Probleme. Sie ist auditierbar, kontrolliert zugÃ¤nglich und vereinfacht die Rotation. Das reduziert Sicherheitsrisiken und macht es Ã¼berflÃ¼ssig, dass Entwickler produktive Secrets Ã¼berhaupt kennen â€“ Deployments ziehen sie automatisch und temporÃ¤r bei Bedarf.</p>
<p><strong>Ich bin Ã¼berzeugt, dass wir mit diesem Ansatz den richtigen Weg eingeschlagen haben.</strong> Vereinheitlichung, Automatisierung und Trennung von Wissen sind fÃ¼r mich der <em>Stand der Technik</em>.</p>
<p><strong>Was meinst du dazu?</strong>
Das ist mein aktueller Blick auf diese Herausforderungen. Gibt es Aspekte, die ich noch nicht bedacht habe oder Schwachstellen in diesem Ansatz? Ich freue mich Ã¼ber Feedback, um daraus spÃ¤ter einen guten ADR fÃ¼r das Architekturforum zu entwickeln.</p>

    </section>
    
  </article>

  <nav>
    
  <div class="category-list">
    Kategorien:
      
      <a href="../../../../categories/code/">Software Development</a>
      
    
  </div>

    
    <div class="relative-navigation">
      
      
        <div class="next">NÃ¤chstes Post: <a class="next" href="../../9/warum-man-backups-und-disaster-recovery-zusammen-denken-sollte/">Backup ohne verprobte Recovery ist wertlos â€“ 5 GrÃ¼nde</a></div>
      
    </div>
    
  </nav>

    </article>
    <footer class="container-fluid ">
      <ul class="nav">
  <li class="nav-item copyright">
    <span class="nav-link">&copy; 2025 <a href="../../../../work/">Martin HÃ¤cker</a></span>
  </li>
  
    
    <li class="nav-item imprint">
      <a class="nav-link" href="../../../../meta/#imprint">
        Impressum
      </a></li>
  
    
    <li class="nav-item privacy-policy">
      <a class="nav-link" href="../../../../meta/#privacy-policy">
        DatenschutzerklÃ¤rung
      </a></li>
  
    
    <li class="nav-item colophon">
      <a class="nav-link" href="../../../../meta/#colophon">
        Kolophon
      </a></li>
  
  <li class="ml-auto nav-item rss-feed">
    <a class="nav-link" href="../../../feed.xml">
      <img class="rss-icon" src=/static/rss.svg height=25 width=25>
      <span class="sr-only">RSS-Feed</span>
    </a>
  </li>
  <li class="nav-item license">
    <a class="nav-link" 
      rel="license" 
      target="_blank" 
      href="https://creativecommons.org/licenses/by-sa/4.0/deed.de"
    >
      <img 
        src="/static/cc-by-sa-88x31.png"
        alt="Creative Commons Namensnennung - Weitergabe unter gleichen Bedingungen 4.0 Internationale Lizenz"
      >
    </a>
  </li>
</ul>
    </footer>
  </body>
</html>
