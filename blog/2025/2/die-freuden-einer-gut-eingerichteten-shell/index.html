
<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="../../../../static/bootstrap-4.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../../static/style.css">
    <link rel="stylesheet" href="../../../../static/pygments.css">
    <title>Die Freuden einer gut eingerichteten Shell</title>
    <link rel="alternate" type="application/atom+xml" title="RSS: Martin HÃ¤ckers Blog Artikel" href="../../../feed.xml" />
  </head>
  <body>
    <header>
      <nav class="navbar navbar-expand-sm">
  <a href="../../../../" class="navbar-brand ">ğŸ </a>
  <input type="checkbox" id="navbar-toggle-checkbox">
  <label for="navbar-toggle-checkbox" class="navbar-brand navbar-toggle d-sm-none float-right" aria-label="Navigation Umschalten">
    <span></span>
  </label>
  <ul class="navbar-nav collapse navbar-collapse">
    
      <li class="nav-item "><a href="../../../../work/" class="nav-link">Professionelle Softwareentwicklung</a></li>
    
      <li class="nav-item "><a href="../../../../projects/" class="nav-link">Projekte</a></li>
    
      <li class="nav-item "><a href="../../../../publications/" class="nav-link">VerÃ¶ffentlichungen und VortrÃ¤ge</a></li>
    
      <li class="nav-item active"><a href="../../../" class="nav-link">Blog<span class="sr-only">(ausgewÃ¤hlt)</span></a></li>
    
      <li class="nav-item "><a href="../../../../categories/" class="nav-link">Kategorien</a></li>
    
    <li class="nav-item ml-auto">
      <a class=nav-link href="./">ğŸ‡©ğŸ‡ª</a>
    </li>
    <li class="nav-item pull-right">
      <a class=nav-link href="../../../../en/blog/2025/2/die-freuden-einer-gut-eingerichteten-shell/">ğŸ‡¬ğŸ‡§</a>
    </li>
  </ul>
</nav>
<nav class="breadcrumb">
  

  

  

<a class="breadcrumb-item " href="../../../../">ğŸ </a>


<a class="breadcrumb-item " href="../../../">Blog</a>


<a class="breadcrumb-item active" href="./">Die Freuden einer gut eingerichteten Shell</a>

</nav>
    </header>
    <article class="page die-freuden-einer-gut-eingerichteten-shell  container-fluid">
      
  
  <article class="blog-post">
    <header>
      <h2>
        
        Die Freuden einer gut eingerichteten Shell
        
      </h2>
      <p class="meta">
        written by Martin HÃ¤cker on <time datetime="2025-02-27">Donnerstag, 27. Februar 2025</time>
      </p>
    </header>

    <section class="blog-post-body">
      <p><img src="terminal.jpg" alt="Terminal"></p>
<p>Es fÃ¤ngt natÃ¼rlich mit der Frage an: welche Shell?</p>
<p>Das ist sehr einfach zu beantworten. Auf MacOS ist die <a href="https://www.zsh.org">zsh</a> die Standard-Shell - und daher sollte man die auch benutzen. Artikel Fertig, vielen Dank fÃ¼rs Lesen! ğŸ˜…</p>
<p>Windows hat die <a href="https://de.wikipedia.org/wiki/PowerShell">PowerShell</a> - wer damit Arbeiten (muss) sollte sie lernen!</p>
<p>Die nackte Shell ist ziemlich schlecht konfiguriert, da die MÃ¶glichkeiten der Shell gar nicht ausgenutzt werden. Auf Linux-Distributionen ist es Standard, dass die Shell von der Distribution eingerichtet wird, daher kann man damit meistens schon gut arbeiten.</p>
<p>Aber fÃ¼r MacOS (und Windows) gibt es viel zu tun.</p>
<p>So sieht die zsh unkonfiguriert aus:</p>
<div class="hll"><pre><span></span>dwt@NB1321<span class="w"> </span>~<span class="w"> </span>%<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>Library/Favorites
dwt@NB1321<span class="w"> </span>Favorites<span class="w"> </span>%
</pre></div>
<p>Das ist schon gar nicht schlecht, denn man sieht einiges:</p>
<ul>
<li><code>dwt</code>: Welcher Nutzer man gerade ist. Wichtig, wenn man viel mit <code>sudo</code> arbeitet, damit man nicht versehentlich Kommandos als <code>root</code> mit zu vielen Rechten ausfÃ¼hrt.</li>
<li><code>NB1321</code>: Auf welchem Rechner man gerade eingeloggt ist. Wichtig wenn man auf vielen Rechnern arbeitet und nicht</li>
<li>Den aktuellen Ordner in dem man ist (<code>Favorites</code>). Wichtig damit man z.B. nicht versehentlich die falschen Dateien lÃ¶scht.</li>
<li>Der Prompt <code>%</code> trennt die Meta-Informationen von dem was man selbst eingibt.</li>
</ul>
<p>Da geht aber noch wesentlich mehr. Bei mir z.B. sieht der Prompt so aus:</p>
<div class="hll"><pre><span></span>~/C/P/m/api<span class="w"> </span>â„ï¸<span class="w"> </span>ğŸ§ª<span class="w"> </span>nix-shell-env<span class="w">   </span>ğŸ<span class="w"> </span>venv<span class="w"> </span>â›µï¸<span class="w"> </span>mkk-itsc-dev<span class="w"> </span><span class="o">(</span>api<span class="o">)</span><span class="w"> </span>ğŸŒ±<span class="w"> </span>main<span class="w"> </span><span class="nv">$!</span><span class="w">  </span>4s
â¯
</pre></div>
<p>Da ist enthalten:</p>
<ul>
<li><code>~/C/P/m/api</code> - nicht nur der aktuelle Ordner, sondern auch jeweils der Anfangsbuchstabe der darÃ¼ber liegenden Ordner. Das liefert platzsparend viel mehr Kontext, wo man gerade ist. Super wenn man in vielen Projekten gleichnamige Ordner wie z.B. <code>etc</code>, <code>src</code> oder <code>dist</code> hat.</li>
<li><code>â„ï¸ ğŸ§ª nix-shell-env</code> Zeigt an, dass gerade eine 'dreckige' <a href="https://nixos.wiki/wiki/Development_environment_with_nix-shell">Nix-Shell</a> aktiv ist. Das verwende ich um Projek-spezifische AbhÃ¤ngigkeiten (Shell-Tools, bestimmte Vesionen von Python etc.) zu installieren die ich deklarativ im Projekt tracke. Gut vergleichbar mit Python-Virtual-Envs - aber eben fÃ¼r alles, nicht nur Python-Pakete. Dreckig ('impure') ist Sie, da nicht <em>nur</em> die Shell-Tools aus der Nix-Shell sichtbar sind, sondern auch alles andere was ich im Betriebsystem installiert habe.</li>
<li><code>ğŸ venv</code> - zeigt an, dass gerade ein Python-Virtual-Env aktiv ist. Da ich hauptsÃ¤chlich mit Pyton entwickle ist das natÃ¼rlich entscheidend weil es bedeutet das ich die Projekt-Werkzeuge direkt verwenden kann, da sie im <code>$PATH</code> und <code>$PYTHONPATH</code> sind.</li>
<li><code>â›µï¸ mkk-itsc-dev (api)</code> zeigt an, dass ich mit dem <code>mkk-itsc-dev</code> Kubernetes Cluster verbunden bin, und den Namespace <code>api</code> aktiviert habe. Das ist mir sehr wichtig, damit ich nicht versehentlich mit <code>kubectl</code> Befehlen versehentlich den Produktiv-Cluster zerstÃ¶re. (Rate wieso mir das so wichtig istâ€¦)</li>
<li><code>ğŸŒ± main $!</code> zeigt an, dass ich in einem Git-Repository bin, auf dem main branch, das ich dinge ge-'stash't habe (die vergisst man sonst sehr leicht) und das ich Ã„nderungen habe die ich noch nicht commited habe. Hier gibt es <a href="https://starship.rs/config/#git-status">auch noch mehr informationen wenn das Repo den entsprechenden Zustand hat</a>.</li>
<li>Zuletzt sehe ich da das letzte Kommando 4 Sekunden gedauert hat. Das wird nur angezeigt wenn das letzte Programm mehr als 3 Sekunden gedauert hat und ist immer wiede ein hilfreiche Information um bei langlaufenden Prozesen zu verstehen ob es sich lohnt da etwas zu optimieren.</li>
</ul>
<p>NatÃ¼rlich kÃ¶nnte man hier noch viel mehr anzeigen, je nachdem an was man gerade arbeitet. Ich habe hier eben die Informationen aufgenommen die ich am meisten benÃ¶tige.</p>
<p>Jetzt kommt der Clou: FrÃ¼her habe ich das alles von hand Konfiguriert. Das war ein ewiges und mÃ¼hsammes gefummel um <code>$PS1</code> und konsorten so hinzufummeln das das alles funktioniert hat, und hat nie SpaÃŸ gemacht. Der Standard ist derzeit, das man einen Shell-Konfigurations-Framework wie <a href="https://ohmyz.sh">Oh-My-Zsh</a> oder <a href="https://github.com/sorin-ionescu/prezto">Prezto</a> verwendet. Und die sind auch gut. Aber auch langsam, und komplex und kompliziert. Wenn man da mal etwas anders haben will dann gott bewahre wenn das nicht schon vorbereitet ist oder man darf sich nicht nur mit den KomplexitÃ¤ten von <code>$PS1</code> auseinandersetzen, sondern auch noch damit wie genau dieser Framework das handhabt.</p>
<p>Inzwischen bin ich weiser geworden, und verwende <a href="https://starship.rs">Starship</a>. Damit kann ich meinen Prompt deklarativ in einer <code>.toml</code>-Datei konfigurieren und diesen auch mitnehmen wenn ich mal die Shell wechsle. (Was hÃ¤ufiger vorkommt als mir lieb ist). Und: Starship funktioniert auch mit der PowerShell.</p>
<p><a href="starship.toml">So sieht meine Konfiguration aus</a></p>
<p>Wie richtet man das ein?</p>
<ol>
<li><code>brew install starship</code> (oder mit <a href="https://lix.systems">nix</a>)</li>
<li><code>nano ~/.zshrc</code> und am Ende <code>eval "$(starship init zsh)"</code> einfÃ¼gen.</li>
<li>Konfigurationsdatei erstellen: <code>nano ~/.config/starship.toml</code> und z.b. <a href="starship.toml">den Inhalt aus der Datei oben einfÃ¼gen</a>.</li>
<li>Shell neu starten oder neues Terminal Ã¶ffnen.</li>
</ol>
<p>Danke sagen fÃ¼r die grandiose Verbesserung eures Shell-Lebens bei mir nicht vergessen. ğŸ˜…</p>

    </section>
    
  </article>

  <nav>
    
  <div class="category-list">
    Kategorien:
      
      <a href="../../../../categories/code/">Software Development</a>
      
    
  </div>

    
    <div class="relative-navigation">
      
      
        <div class="next">NÃ¤chstes Post: <a class="next" href="../a-nixle-in-a-buechse-und-a-goldigs-warteweile/">A Nix&#39;le in a BÃ¼chse und a goldigs Warteweile</a></div>
      
    </div>
    
  </nav>

    </article>
    <footer class="container-fluid ">
      <ul class="nav">
  <li class="nav-item copyright">
    <span class="nav-link">&copy; 2025 <a href="../../../../work/">Martin HÃ¤cker</a></span>
  </li>
  
    
    <li class="nav-item imprint">
      <a class="nav-link" href="../../../../meta/#imprint">
        Impressum
      </a></li>
  
    
    <li class="nav-item privacy-policy">
      <a class="nav-link" href="../../../../meta/#privacy-policy">
        DatenschutzerklÃ¤rung
      </a></li>
  
    
    <li class="nav-item colophon">
      <a class="nav-link" href="../../../../meta/#colophon">
        Kolophon
      </a></li>
  
  <li class="ml-auto nav-item rss-feed">
    <a class="nav-link" href="../../../feed.xml">
      <img class="rss-icon" src=/static/rss.svg height=25 width=25>
      <span class="sr-only">RSS-Feed</span>
    </a>
  </li>
  <li class="nav-item license">
    <a class="nav-link" 
      rel="license" 
      target="_blank" 
      href="https://creativecommons.org/licenses/by-sa/4.0/deed.de"
    >
      <img 
        src="/static/cc-by-sa-88x31.png"
        alt="Creative Commons Namensnennung - Weitergabe unter gleichen Bedingungen 4.0 Internationale Lizenz"
      >
    </a>
  </li>
</ul>
    </footer>
  </body>
</html>
